# Redis 管理工具使用指南

## 🚀 快速开始

### 1. 访问工具
在侧边栏的 **网络工具** 分类中，点击 **Redis 管理** 即可进入。

或直接访问: `/#/tools/redis`

---

## 📝 新建连接

### 步骤
1. 点击工具栏的 **"新建连接"** 按钮
2. 填写连接信息：
   - **连接名称**: 给连接起个好记的名字 (可选)
   - **主机地址**: Redis 服务器地址 (必填)
   - **端口**: Redis 端口，默认 6379 (必填)
   - **密码**: Redis 密码 (可选)
   - **用户名**: Redis 6+ ACL 用户名 (可选)
   - **分隔符**: 键名分隔符，默认为 `:` (可选)
3. 选择连接选项：
   - **SSL**: 使用 SSL/TLS 加密连接
   - **Sentinel**: 使用 Redis Sentinel 哨兵模式
   - **Cluster**: 使用 Redis Cluster 集群模式
   - **只读模式**: 以只读模式连接，禁止写操作
4. 选择操作：
   - **仅保存**: 保存连接配置，不立即连接
   - **保存并连接**: 保存配置并立即连接到 Redis

### 示例配置

#### 本地 Redis
```
连接名称: 本地开发环境
主机地址: 127.0.0.1
端口:     6379
密码:     (留空)
```

#### 远程 Redis (带密码)
```
连接名称: 生产环境 Redis
主机地址: redis.example.com
端口:     6379
密码:     your-strong-password
```

#### Redis 6+ ACL 用户
```
连接名称: Redis 6 ACL
主机地址: 127.0.0.1
端口:     6379
用户名:   admin
密码:     admin-password
```

---

## 🔗 连接管理

### 查看已保存的连接
1. 点击工具栏的 **"连接管理"** 按钮
2. 查看所有已保存的连接列表
3. 每个连接显示：
   - 连接名称
   - 主机地址和端口
   - 用户名（如果有）

### 操作已保存的连接
- **连接**: 点击 "连接" 按钮快速连接
- **编辑**: 点击 "编辑" 按钮修改连接信息
- **删除**: 点击 "删除" 按钮删除连接 (需确认)

---

## 📊 数据库管理

### 选择数据库
1. 连接成功后，在左侧栏顶部可以看到 **"数据库"** 下拉框
2. 默认连接到 `DB0`
3. 点击下拉框可以切换到其他数据库 (DB0-DB15)
4. 括号中显示当前数据库的键数量

### 查看键列表
- 连接成功后，左侧栏会显示当前数据库的所有键
- 键数量显示在标题中：**"键 (X/Y)"**
  - X: 过滤后的键数量
  - Y: 总键数量

### 搜索键
1. 在左侧栏的 **"键"** 区域，使用搜索框
2. 输入关键字，支持 **模糊匹配**
3. 实时过滤键列表

### 查看键值
1. 在键列表中点击任意键
2. 右侧会显示键的详细信息：
   - 键名
   - 数据类型 (string/list/set/zset/hash)
   - 键值内容
3. 可以在文本框中编辑键值
4. 点击 **"保存"** 按钮更新键值

### 删除键
- **方法 1**: 在键列表中，点击键右侧的删除按钮
- **方法 2**: 在键值详情区，点击顶部的 **"删除"** 按钮
- 需要确认后才会删除

### 刷新键值
在键值详情区，点击 **"刷新"** 按钮重新加载键值。

---

## 💻 命令执行

### 执行 Redis 命令
1. 在右侧主区域的 **"Redis 命令"** 输入框中输入命令
2. 支持任意 Redis 命令，例如：
   ```redis
   GET mykey
   SET mykey "Hello Redis"
   KEYS *
   INCR counter
   HGETALL user:1001
   LPUSH mylist "item1" "item2"
   ```
3. 按 **Enter** 键或点击 **"执行"** 按钮
4. 命令执行结果会显示在下方的 **"执行结果"** 区域

### 常用命令示例

#### 字符串操作
```redis
SET name "Alice"           # 设置键值
GET name                   # 获取键值
INCR counter               # 自增
DECR counter               # 自减
APPEND name " Smith"       # 追加字符串
```

#### 列表操作
```redis
LPUSH mylist "item1"       # 左侧推入
RPUSH mylist "item2"       # 右侧推入
LRANGE mylist 0 -1         # 获取所有元素
LPOP mylist                # 左侧弹出
RPOP mylist                # 右侧弹出
```

#### 集合操作
```redis
SADD myset "member1"       # 添加成员
SMEMBERS myset             # 获取所有成员
SISMEMBER myset "member1"  # 检查成员是否存在
SREM myset "member1"       # 删除成员
```

#### 哈希操作
```redis
HSET user:1001 name "Alice"    # 设置哈希字段
HGET user:1001 name            # 获取哈希字段
HGETALL user:1001              # 获取所有字段
HDEL user:1001 name            # 删除哈希字段
```

#### 键管理
```redis
KEYS *                     # 获取所有键
KEYS user:*                # 模式匹配
EXISTS mykey               # 检查键是否存在
DEL mykey                  # 删除键
TTL mykey                  # 查看过期时间
EXPIRE mykey 60            # 设置过期时间 (秒)
```

---

## 📜 命令历史

### 查看历史
- 左侧栏底部的 **"命令历史"** 区域显示最近执行的 20 条命令
- 自动保存到 `appData/redis-config.json`

### 重用历史命令
- 点击历史记录中的任意命令
- 命令会自动填充到输入框中
- 可以修改后再执行

### 清空历史
点击 **"命令历史"** 标题旁的 **"清空"** 按钮。

---

## 🔌 断开连接

点击工具栏的 **"断开"** 按钮断开当前连接。

断开后：
- 连接状态变为 "未连接Redis"
- 左侧栏隐藏数据库和键列表
- 可以选择其他连接或新建连接

---

## 💾 数据持久化

### 自动保存
所有连接配置和命令历史会自动保存到：
```
appData/redis-config.json
```

### 数据结构
```json
{
  "connections": [
    {
      "name": "本地开发环境",
      "host": "127.0.0.1",
      "port": 6379,
      "password": "",
      "username": "",
      "separator": ":",
      "ssl": false,
      "sentinel": false,
      "cluster": false,
      "readonly": false
    }
  ],
  "commandHistory": [
    "GET mykey",
    "SET mykey value",
    "KEYS *"
  ]
}
```

### 自动加载
应用启动时会自动加载保存的配置和历史记录。

---

## 🎨 界面说明

### 工具栏 (顶部)
- **左侧**: 连接状态指示
- **右侧**: 操作按钮
  - 新建连接
  - 连接管理
  - 刷新 (已连接时显示)
  - 断开 (已连接时显示)

### 左侧栏
- **数据库选择**: 切换 Redis 数据库
- **键搜索**: 模糊搜索键名
- **键列表**: 显示和操作键
- **命令历史**: 查看和重用历史命令

### 右侧主区域
- **键值显示**: 查看和编辑选中的键
- **命令输入**: 执行 Redis 命令
- **执行结果**: 显示命令执行结果
- **空状态提示**: 未连接或未选中键时的提示

---

## ⚠️ 注意事项

### 1. 连接安全
- 不要在不安全的网络环境中使用明文密码
- 建议使用 SSL/TLS 加密连接
- 生产环境建议启用 ACL 用户权限管理

### 2. 危险操作
以下命令要谨慎使用：
- `FLUSHDB`: 清空当前数据库
- `FLUSHALL`: 清空所有数据库
- `KEYS *`: 在大数据量时会阻塞服务器
- `DEL`: 删除键 (不可恢复)

### 3. 性能建议
- 使用 `SCAN` 代替 `KEYS *` 遍历大量键
- 避免在生产环境执行慢查询
- 使用只读模式查看生产数据

### 4. 键名规范
- 使用有意义的键名
- 推荐使用分隔符 (如 `:` 或 `/`)
- 示例: `user:1001:profile`, `cache/products/list`

---

## 🐛 故障排查

### 连接失败
1. 检查 Redis 服务是否运行
2. 检查主机地址和端口是否正确
3. 检查密码是否正确
4. 检查防火墙是否允许连接
5. 检查 Redis 配置是否允许远程连接

### 命令执行失败
1. 检查命令语法是否正确
2. 检查用户是否有执行权限 (ACL)
3. 检查是否处于只读模式
4. 查看 Redis 服务器日志

### 数据不显示
1. 点击 "刷新" 按钮
2. 检查是否选择了正确的数据库
3. 检查键名搜索是否过滤了数据

---

## 📚 相关资源

- [Redis 官方文档](https://redis.io/documentation)
- [Redis 命令参考](https://redis.io/commands)
- [Redis 最佳实践](https://redis.io/topics/best-practices)

---

**最后更新**: 2025年11月5日  
**版本**: v1.0.0

