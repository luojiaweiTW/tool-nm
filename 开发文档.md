# Neon Tools - 开发文档

**项目名称**：Neon Tools（霓虹工具集）  
**版本**：v1.0.0  
**技术栈**：Vue 3 + TypeScript + Electron + Vite

---

## 📋 目录

1. [项目简介](#项目简介)
2. [技术架构](#技术架构)
3. [环境要求](#环境要求)
4. [快速开始](#快速开始)
5. [项目结构](#项目结构)
6. [开发指南](#开发指南)
7. [构建部署](#构建部署)
8. [问题修复记录](#问题修复记录)

---

## 📖 项目简介

Neon Tools 是一个基于 Vue 3 + TypeScript 的桌面端工具集合应用，采用 **Pop Art × Vaporwave/Synthwave** 霓虹海报风格设计，提供 22 个实用开发工具。

### 核心特性

- 🎨 **霓虹风格设计**：高饱和度霓虹色、外发光效果、厚描边、网点质感
- 🛠️ **22个实用工具**：涵盖文本处理、编码加密、开发调试、网络工具等
- ⚡ **高性能**：路由懒加载、组件按需导入、代码分块
- 🎯 **用户友好**：快捷键支持、状态持久化、实时反馈
- 📱 **响应式布局**：适配不同屏幕尺寸
- 🖥️ **双端支持**：Web版 + Electron桌面版

---

## 🏗️ 技术架构

### 核心框架

- **Vue 3.5** - 渐进式 JavaScript 框架（Composition API）
- **TypeScript** - 类型安全
- **Vite 7** - 极速构建工具
- **Electron 38** - 跨平台桌面应用框架

### UI 与样式

- **Element Plus** - 组件库（自动按需导入）
- **UnoCSS** - 原子化 CSS 引擎
- **自定义组件** - NeonButton、NeonInput、NeonCard 等

### 状态与路由

- **Pinia** - 状态管理
- **Vue Router** - 路由管理（懒加载 + 路由保持机制）

### 核心依赖

```json
{
  "vue": "^3.5.22",
  "element-plus": "^2.11.4",
  "pinia": "^3.0.3",
  "vue-router": "^4.5.1",
  "crypto-js": "^4.2.0",
  "axios": "^1.12.2",
  "marked": "^16.4.0",
  "diff": "^8.0.2",
  "sql-formatter": "^15.6.10",
  "qrcode": "^1.5.4",
  "ssh2": "^1.17.0"
}
```

### 开发工具

- **electron-vite** - Electron 集成工具
- **electron-builder** - 应用打包工具
- **unplugin-auto-import** - API 自动导入
- **unplugin-vue-components** - 组件自动导入

---

## 💻 环境要求

### 必需环境

- **Node.js** ≥ 20.x
- **npm** ≥ 10.x
- **操作系统**：Windows / macOS / Linux

### 推荐配置

- IDE：VS Code
- 插件：Volar、TypeScript Vue Plugin

---

## 🚀 快速开始

### 1. 克隆项目

```bash
git clone <repository-url>
cd neon-tools
```

### 2. 安装依赖

```bash
npm install
```

**首次安装可能需要较长时间，请耐心等待。**

### 3. 启动开发模式

#### Web 开发模式

```bash
npm run dev
```

应用将在 `http://localhost:5173` 启动。

#### Electron 开发模式

```bash
npm run dev:electron
```

将启动完整的桌面应用（包含 Vite + Electron）。支持热重载。

**注意**：首次运行可能需要下载 Electron 二进制文件。

### 4. Electron 镜像配置（可选）

如果 Electron 下载慢，可配置淘宝镜像：

```bash
npm config set electron_mirror https://npmmirror.com/mirrors/electron/
```

或在 PowerShell 中设置环境变量：

```powershell
$env:ELECTRON_MIRROR="https://npmmirror.com/mirrors/electron/"
```

---

## 📁 项目结构

```
neon-tools/
├── electron/                    # Electron 主进程
│   ├── main.ts
│   └── preload.ts
├── src/
│   ├── assets/                  # 静态资源（SVG 纹理等）
│   │   ├── halftone.svg
│   │   └── noise.svg
│   ├── components/              # 公共组件
│   │   ├── NeonButton.vue       # 霓虹按钮
│   │   ├── NeonInput.vue        # 霓虹输入框
│   │   ├── NeonTextarea.vue     # 霓虹文本域
│   │   ├── NeonCard.vue         # 霓虹卡片
│   │   ├── Sidebar.vue          # 侧边栏
│   │   ├── Header.vue           # 头部
│   │   ├── EmptyState.vue       # 空态组件
│   │   └── ErrorState.vue       # 错误态组件
│   ├── layouts/                 # 布局组件
│   │   └── MainLayout.vue
│   ├── pages/                   # 页面/工具
│   │   └── tools/               # 22个工具目录
│   │       ├── JsonFormatter/   # JSON 格式化
│   │       ├── Timestamp/       # 时间戳转换
│   │       ├── Base64/          # Base64 编解码
│   │       ├── UrlEncoder/      # URL 编码
│   │       ├── Hash/            # 哈希计算
│   │       ├── UUID/            # UUID 生成
│   │       ├── Encrypt/         # 加密解密
│   │       ├── JWT/             # JWT 解析
│   │       ├── JsonToJava/      # JSON 转 Java
│   │       ├── SqlFormatter/    # SQL 格式化
│   │       ├── TextDiff/        # 文本对比
│   │       ├── HttpClient/      # HTTP 测试
│   │       ├── XmlYaml/         # XML/YAML 转换
│   │       ├── Unicode/         # Unicode 转换
│   │       ├── RandomGenerator/ # 随机数据生成
│   │       ├── NumberBase/      # 进制转换
│   │       ├── QRCode/          # 二维码生成
│   │       ├── ExceptionParser/ # 异常堆栈分析
│   │       ├── MavenSearch/     # Maven 依赖查询
│   │       ├── Regex/           # 正则表达式
│   │       ├── Cron/            # Cron 表达式
│   │       ├── SSH/             # SSH 连接
│   │       ├── DocToMarkdown/   # Word 转 Markdown
│   │       ├── Knowledge/       # 知识库
│   │       └── Entertainment/   # 娱乐新闻
│   ├── router/                  # 路由配置
│   │   └── index.ts
│   ├── stores/                  # 状态管理
│   │   └── ui.ts
│   ├── styles/                  # 样式系统
│   │   ├── tokens.css           # 设计变量（41个颜色）
│   │   ├── element-override.css # Element Plus 主题覆盖
│   │   └── global.css           # 全局样式
│   ├── composables/             # 组合式函数
│   │   └── useKeyboard.ts       # 快捷键
│   ├── App.vue
│   └── main.ts
├── build/                       # 构建资源
│   └── icon.ico                 # 应用图标
├── scripts/                     # 脚本工具
│   └── kill-port.cjs            # 端口清理
├── electron-main.cjs            # Electron 主进程
├── electron-preload.cjs         # Electron 预加载
├── electron-builder.json        # 打包配置
├── uno.config.ts                # UnoCSS 配置
├── vite.config.ts               # Vite 配置
├── tsconfig.json                # TypeScript 配置
├── package.json                 # 项目依赖
└── README.md
```

---

## 🔧 开发指南

### 添加新工具页面

1. **创建工具目录**

在 `src/pages/tools/` 创建新目录，例如：`MyTool/`

2. **创建页面文件**

在目录下创建 `Index.vue`：

```vue
<script setup lang="ts">
import { ref } from 'vue'

const input = ref('')
const output = ref('')

const handleProcess = () => {
  // 处理逻辑
  output.value = input.value
}
</script>

<template>
  <div class="tool-container">
    <Header 
      title="我的工具" 
      subtitle="工具描述"
      icon="i-mdi-tools"
    />
    
    <NeonCard title="输入">
      <NeonTextarea v-model="input" placeholder="输入内容" />
    </NeonCard>
    
    <NeonCard title="输出">
      <div class="output">{{ output }}</div>
    </NeonCard>
    
    <div class="actions">
      <NeonButton @click="handleProcess">处理</NeonButton>
    </div>
  </div>
</template>

<style scoped>
.tool-container {
  /* 样式 */
}
</style>
```

3. **添加路由**

在 `src/router/index.ts` 中添加路由：

```typescript
{
  path: '/tools/my-tool',
  name: 'MyTool',
  component: () => import('@/pages/tools/MyTool/Index.vue')
}
```

4. **添加菜单项**

在 `src/components/Sidebar.vue` 的 `menuItems` 中添加：

```typescript
{
  label: '我的工具',
  path: '/tools/my-tool',
  icon: 'i-mdi-tools'
}
```

### 自定义主题颜色

编辑 `src/styles/tokens.css` 修改设计变量：

```css
:root {
  /* 霓虹色 */
  --neon-cyan: #21e6ff;
  --neon-pink: #ff2aa1;
  --neon-purple: #9b5cff;
  --neon-yellow: #ffe600;
  --neon-lime: #d0ff00;
  
  /* 浅色系（新增21个） */
  --neon-cyan-light: #6ff3ff;
  --neon-pink-light: #ff6ec8;
  /* ... 更多变量 */
}
```

### 使用自定义组件

项目提供了多个霓虹风格组件：

```vue
<template>
  <!-- 霓虹按钮 -->
  <NeonButton type="primary" @click="handleClick">
    点击我
  </NeonButton>
  
  <!-- 霓虹输入框 -->
  <NeonInput 
    v-model="value" 
    placeholder="输入内容"
    icon="i-mdi-magnify"
  />
  
  <!-- 霓虹文本域 -->
  <NeonTextarea 
    v-model="content" 
    :rows="10"
    placeholder="输入多行内容"
  />
  
  <!-- 霓虹卡片 -->
  <NeonCard title="卡片标题" subtitle="副标题">
    <p>卡片内容</p>
  </NeonCard>
</template>
```

### 快捷键系统

使用 `useKeyboard` 组合式函数：

```vue
<script setup lang="ts">
import { useKeyboard } from '@/composables/useKeyboard'

useKeyboard('ctrl+s', () => {
  console.log('保存快捷键触发')
})
</script>
```

---

## 📦 构建部署

### Web 版本

#### 开发预览

```bash
npm run dev
```

访问：`http://localhost:5173`

#### 生产构建

```bash
npm run build
```

构建产物将输出到 `dist/` 目录。

#### 预览构建结果

```bash
npm run preview
```

### Electron 桌面版

#### 快速测试构建（不打包）

```bash
npm run build:dir
```

输出：`release/win-unpacked/` 目录  
直接运行：`release/win-unpacked/Neon Tools.exe`

**推荐用于测试，速度快！**

#### 完整打包（生成安装包）

```bash
npm run build:electron
```

输出文件：
- `release/牛马工具集-1.0.0.exe` - NSIS 安装包
- `release/牛马工具集-1.0.0-Portable.exe` - 便携版

**首次构建可能需要下载 Electron 二进制文件（~150MB），请耐心等待。**

### 打包配置

Electron 打包配置在 `electron-builder.json`：

```json
{
  "appId": "com.neontools.app",
  "productName": "牛马工具集",
  "win": {
    "target": [
      {
        "target": "nsis",
        "arch": ["x64"]
      },
      {
        "target": "portable",
        "arch": ["x64"]
      }
    ],
    "icon": "build/icon.ico"
  }
}
```

### 应用图标

应用图标位置：`build/icon.ico`

**替换图标步骤**：
1. 准备 256x256 的 PNG 图片
2. 转换为 ICO 格式
3. 替换 `build/icon.ico`
4. 重新构建

### 代码签名（可选）

Windows 代码签名需要：

1. 申请代码签名证书（.pfx 文件）
2. 在 `electron-builder.json` 中配置：

```json
"win": {
  "certificateFile": "path/to/cert.pfx",
  "certificatePassword": "password"
}
```

---

## 🐛 问题修复记录

### 1. HTTP SSL 证书错误

**问题描述**：使用 HTTP 测试工具时，自签名证书或内部证书导致 SSL 验证失败。

**解决方案**：在 `electron-main.cjs` 中添加全局证书验证处理：

```javascript
app.on('certificate-error', (event, webContents, url, error, certificate, callback) => {
  event.preventDefault()
  callback(true)
})
```

**影响文件**：`electron-main.cjs`  
**状态**：✅ 已修复

### 2. 路由刷新跳转错误

**问题描述**：刷新页面后跳转到首页，丢失当前路由状态。

**解决方案**：使用 `sessionStorage` 保存和恢复路由：

```typescript
// 保存当前路由
router.beforeEach((to, from, next) => {
  sessionStorage.setItem('lastRoute', to.path)
  next()
})

// 应用启动时恢复路由
const lastRoute = sessionStorage.getItem('lastRoute')
if (lastRoute && lastRoute !== '/') {
  router.push(lastRoute)
}
```

**影响文件**：`src/router/index.ts`  
**状态**：✅ 已修复

### 3. SQL 格式化参数错误

**问题描述**：`sql-formatter` 库 API 参数不匹配导致格式化失败。

**解决方案**：使用正确的 `tabWidth` 参数替代 `indent`：

```typescript
import { format } from 'sql-formatter'

const formatted = format(sql, {
  language: 'mysql',
  tabWidth: 2,  // 使用 tabWidth 而不是 indent
  keywordCase: 'upper'
})
```

**影响文件**：`src/pages/tools/SqlFormatter/Index.vue`  
**状态**：✅ 已修复

---

## 🎯 开发注意事项

### Electron 开发模式

- 首次运行 `npm run dev:electron` 可能需要等待 Electron 下载
- 开发模式支持热重载，修改代码后自动刷新
- 如果端口占用，运行 `npm run kill-port` 清理端口

### 性能优化

- 路由使用懒加载：`component: () => import(...)`
- 组件自动按需导入：无需手动 import
- 代码分块：每个工具独立打包

### TypeScript 类型

- 确保所有变量都有明确的类型
- 使用 `vue-tsc` 进行类型检查：`npm run build:check`
- Ref 类型声明：`const value = ref<string>('')`

### Git 提交规范

建议使用约定式提交：

```bash
feat: 新增 XXX 工具
fix: 修复 XXX 问题
docs: 更新文档
style: 样式调整
refactor: 重构代码
perf: 性能优化
test: 测试相关
chore: 构建/工具相关
```

---

## 📚 技术文档

### 相关技术栈文档

- [Vue 3 官方文档](https://cn.vuejs.org/)
- [TypeScript 官方文档](https://www.typescriptlang.org/)
- [Vite 官方文档](https://cn.vitejs.dev/)
- [Electron 官方文档](https://www.electronjs.org/)
- [Element Plus 官方文档](https://element-plus.org/)
- [UnoCSS 官方文档](https://unocss.dev/)
- [Pinia 官方文档](https://pinia.vuejs.org/)

---

## 📄 许可证

MIT License

---

**Created with 💙 by AI Assistant**
